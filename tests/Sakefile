# Extensionless name of Markdown file
#! MARKDOWN_FILE = test

# Variables
#! PREFIX = /home/mariachi/.pandoc
#! BIB_FILE = /home/mariachi/Dropbox/Working/library.bib
#! CSL = american-political-science-association


# Other common CSLs: 
#   * chicago-fullnote-bibliography
#   * chicago-syllabus-no-bib
#   * apa

# To add version control footer support in PDFs:
#   1. Run vcinit in the directory
#   2. Place `./vc` at the front of the formula
#   3. Add `-V vc` to the pandoc command
#   4. Change pagestyle to athgit instead of ath

# NB: There are no image captions when converting from Markdown to odt. Captions
# do work when converting from Markdown to docx, but you can't use a custom
# template with docx output.

generate output:
  help: convert Markdown file to different formats

  pdf:
    help: convert to PDF
    dependencies:
      - $MARKDOWN_FILE.md
    formula: >
      replace_includes $MARKDOWN_FILE.md | pandoc -r markdown+simple_tables+table_captions+yaml_metadata_block -w latex -s -S --default-image-extension=pdf --latex-engine=xelatex --template=$PREFIX/templates/xelatex.template --filter pandoc-citeproc --csl=$PREFIX/csl/$CSL.csl --bibliography=$BIB_FILE -V chapterstyle=hikma-article -V pagestyle=ath -o $MARKDOWN_FILE.pdf $MARKDOWN_FILE.md
    output: 
      - $MARKDOWN_FILE.pdf

